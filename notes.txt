minikube start

NAMESPACE="confluent"

kubectl create namespace $NAMESPACE
kubectl config set-context --current --namespace=$NAMESPACE

helm upgrade --install confluent-operator confluentinc/confluent-for-kubernetes --namespace $NAMESPACE --set kRaftEnabled=true

kubectl apply -f edge_node.yaml --namespace $NAMESPACE
kubectl get pods

kubectl port-forward pod/kafka-0 9092:9092

kafka-topics --bootstrap-server localhost:9092 --list
kafka-topics --create --topic test-topic --bootstrap-server localhost:9092
kafka-topics --bootstrap-server localhost:9092 --list
kafka-producer-perf-test --topic test-topic --num-records 20000 --record-size 100000 --throughput -1 --producer-props bootstrap.servers=localhost:9092 batch.size=100
kafka-console-producer --bootstrap-server localhost:9092 --topic test-topic --property parse.key=true --property key.separator=,
kafka-console-consumer --bootstrap-server localhost:9092 --topic test-topic

---
kubectl config set-context --current --namespace=$NAMESPACE
kubectl delete -f edge_node.yaml --namespace $NAMESPACE
helm uninstall confluent-operator

minikube stop